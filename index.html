<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12 Jyotirlingas: The Moving Pilgrimage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #020617;
            color: #f8fafc;
            overflow-x: hidden;
        }
        .cinzel { font-family: 'Cinzel', serif; }
        
        #map-container {
            position: relative;
            width: 100%;
            height: 600px;
            background: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
            border-radius: 24px;
            border: 1px solid rgba(251, 191, 36, 0.3);
            overflow: hidden;
            margin-bottom: 2rem;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* Improved India Map Outline */
        .map-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: auto;
            height: 90%;
            opacity: 0.15;
            pointer-events: none;
            stroke: #fbbf24;
            stroke-width: 1;
            fill: rgba(251, 191, 36, 0.05);
        }

        .traveler {
            position: absolute;
            width: 48px;
            height: 48px;
            z-index: 50;
            /* Smooth transition for movement */
            transition: left 2s cubic-bezier(0.45, 0.05, 0.55, 0.95), 
                        top 2s cubic-bezier(0.45, 0.05, 0.55, 0.95);
            filter: drop-shadow(0 0 12px #fbbf24);
            pointer-events: none;
        }

        .temple-marker {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #334155;
            border: 2px solid #475569;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.5s ease;
            z-index: 10;
        }

        .temple-marker.visited {
            background: #fbbf24;
            border-color: #fff;
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.8);
        }

        .temple-marker.active {
            background: #ef4444;
            border-color: #fff;
            transform: translate(-50%, -50%) scale(1.6);
            box-shadow: 0 0 25px #ef4444;
            z-index: 20;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(251, 191, 36, 0.2);
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .driving-anim svg {
            animation: bounce 0.4s infinite ease-in-out;
        }

        #info-overlay {
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .line-path {
            fill: none;
            stroke: rgba(251, 191, 36, 0.2);
            stroke-width: 2;
            stroke-dasharray: 5, 5;
        }
    </style>
</head>
<body class="min-h-screen pb-20">

    <header class="py-10 text-center">
        <h1 class="cinzel text-4xl md:text-6xl font-bold text-amber-400 mb-2 tracking-widest uppercase drop-shadow-lg">The Divine Circuit</h1>
        <p class="text-slate-400 text-sm italic tracking-widest uppercase opacity-70">Automated Yatra across the 12 Holy Jyotirlingas</p>
    </header>

    <main class="container mx-auto px-4 max-w-5xl">
        
        <div id="map-container">
            <!-- India Reference SVG -->
            <svg class="map-bg" viewBox="0 0 400 500">
                <path d="M180,20 C220,10 250,30 280,100 C320,130 380,150 380,250 C380,350 320,400 280,440 C240,480 200,500 180,490 C140,480 100,450 60,400 C20,350 10,250 40,150 C70,100 120,50 180,20 Z" />
            </svg>

            <!-- SVG for connecting lines -->
            <svg id="paths-svg" class="absolute inset-0 w-full h-full pointer-events-none">
                <path id="travel-path" class="line-path" d="" />
            </svg>

            <div id="markers-layer"></div>

            <!-- The Traveler (Car Icon) -->
            <div id="car" class="traveler flex items-center justify-center" style="left: 15%; top: 55%;">
                <svg viewBox="0 0 24 24" width="40" height="40" fill="#fbbf24">
                    <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"/>
                </svg>
            </div>

            <!-- Information Panel -->
            <div id="info-overlay" class="absolute bottom-8 left-8 right-8 glass-panel p-6 rounded-3xl opacity-0 translate-y-10 z-50">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-6">
                    <div class="flex-1">
                        <div class="flex items-center gap-3 mb-1">
                             <span id="current-step" class="bg-amber-500/20 text-amber-500 px-2 py-0.5 rounded text-[10px] font-bold tracking-tighter uppercase"></span>
                             <span id="current-loc" class="text-slate-400 text-[10px] font-bold uppercase tracking-widest"></span>
                        </div>
                        <h2 id="current-name" class="cinzel text-3xl font-bold text-white mb-2"></h2>
                        <p id="current-desc" class="text-slate-300 text-sm leading-relaxed max-w-2xl"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div class="flex flex-wrap justify-center gap-6 mb-16">
            <button id="start-btn" onclick="startPilgrimage()" class="px-10 py-4 bg-amber-500 hover:bg-amber-400 text-slate-950 font-black rounded-full transition transform hover:scale-105 active:scale-95 shadow-xl shadow-amber-500/20 flex items-center gap-3 uppercase tracking-tighter">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                Start Divine Yatra
            </button>
            <button onclick="resetPilgrimage()" class="px-10 py-4 border-2 border-slate-800 hover:bg-slate-800 text-white font-bold rounded-full transition uppercase tracking-tighter">
                Reset
            </button>
        </div>

        <!-- Reference Table -->
        <div id="temple-grid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 opacity-80">
            <!-- Items injected by JS -->
        </div>

    </main>

    <script>
        const jyotirlingas = [
            { name: "Somnath", loc: "Gujarat", x: 15, y: 55, desc: "The 'Shrine Eternal', the first of the 12 Jyotirlingas, stands where the Moon God sought redemption." },
            { name: "Mallikarjuna", loc: "Andhra Pradesh", x: 55, y: 78, desc: "Located on Srisailam Mountain, it is a rare confluence of a Jyotirlinga and a Shakti Peeth." },
            { name: "Mahakaleshwar", loc: "Madhya Pradesh", x: 38, y: 52, desc: "The south-facing lingam (Dakshinamurti) is unique, master of death and time in the city of Ujjain." },
            { name: "Omkareshwar", loc: "Madhya Pradesh", x: 38, y: 58, desc: "On a river island shaped like the sacred Om, where Narmada divides to embrace the shrine." },
            { name: "Kedarnath", loc: "Uttarakhand", x: 48, y: 18, desc: "The highest of the twelve, set against the backdrop of the majestic Himalayas in the Garhwal region." },
            { name: "Bhimashankar", loc: "Maharashtra", x: 30, y: 68, desc: "Nestled in the Sahyadri hills, it marks the spot where Shiva destroyed the demon Tripurasura." },
            { name: "Kashi Vishwanath", loc: "Uttar Pradesh", x: 62, y: 42, desc: "The heart of Varanasi, the oldest living city, where Shiva grants moksha to the departing soul." },
            { name: "Trimbakeshwar", loc: "Maharashtra", x: 28, y: 64, desc: "Located at the source of the Godavari, featuring a unique three-faced lingam for the Trinity." },
            { name: "Vaidyanath", loc: "Jharkhand", x: 72, y: 46, desc: "Also known as Baidyanath Dham, where Ravana worshipped Shiva to gain divine strength." },
            { name: "Nageshwar", loc: "Gujarat", x: 10, y: 50, desc: "The 'Lord of Snakes', standing as a beacon of protection near the ancient coast of Dwarka." },
            { name: "Rameshwaram", loc: "Tamil Nadu", x: 50, y: 92, desc: "Consecrated by Lord Rama himself after his victory in Lanka, it is the bridge to spiritual peace." },
            { name: "Grishneshwar", loc: "Maharashtra", x: 34, y: 62, desc: "The last of the twelve, an architectural marvel near Ellora, built by the devotee Ghushma." }
        ];

        let isDriving = false;

        function init() {
            const markersLayer = document.getElementById('markers-layer');
            const grid = document.getElementById('temple-grid');

            jyotirlingas.forEach((t, i) => {
                // Markers
                const marker = document.createElement('div');
                marker.className = 'temple-marker';
                marker.id = `marker-${i}`;
                marker.style.left = `${t.x}%`;
                marker.style.top = `${t.y}%`;
                markersLayer.appendChild(marker);

                // Reference Grid
                const item = document.createElement('div');
                item.className = 'glass-panel p-4 rounded-2xl text-center transition hover:border-amber-500 cursor-pointer';
                item.innerHTML = `
                    <div class="text-[10px] text-amber-500 font-bold mb-1">STEP ${i+1}</div>
                    <div class="text-xs font-bold text-white uppercase tracking-tighter">${t.name}</div>
                `;
                item.onclick = () => { if(!isDriving) moveToStep(i); };
                grid.appendChild(item);
            });

            // Set initial position
            updateCarPosition(0);
        }

        function updateCarPosition(index) {
            const car = document.getElementById('car');
            const t = jyotirlingas[index];
            car.style.left = `calc(${t.x}% - 24px)`;
            car.style.top = `calc(${t.y}% - 24px)`;
        }

        async function startPilgrimage() {
            if (isDriving) return;
            isDriving = true;
            document.getElementById('start-btn').disabled = true;
            
            for (let i = 0; i < jyotirlingas.length; i++) {
                await moveToStep(i);
                // Pause at each temple to read
                await new Promise(r => setTimeout(r, 4000));
            }

            isDriving = false;
            document.getElementById('start-btn').disabled = false;
        }

        function moveToStep(index) {
            return new Promise(resolve => {
                const car = document.getElementById('car');
                const overlay = document.getElementById('info-overlay');
                const t = jyotirlingas[index];

                // Hide overlay during move
                overlay.style.opacity = '0';
                overlay.style.transform = 'translateY(20px)';
                
                // Start animation
                car.classList.add('driving-anim');
                updateCarPosition(index);

                // Update markers
                document.querySelectorAll('.temple-marker').forEach((m, i) => {
                    m.classList.remove('active');
                    if (i < index) m.classList.add('visited');
                    else m.classList.remove('visited');
                });
                document.getElementById(`marker-${index}`).classList.add('active');

                // Finish move
                setTimeout(() => {
                    car.classList.remove('driving-anim');
                    
                    // Populate and show info
                    document.getElementById('current-step').innerText = `Destination ${index + 1} of 12`;
                    document.getElementById('current-name').innerText = t.name;
                    document.getElementById('current-loc').innerText = t.loc;
                    document.getElementById('current-desc').innerText = t.desc;

                    overlay.style.opacity = '1';
                    overlay.style.transform = 'translateY(0)';
                    resolve();
                }, 2100); // Matches the 2s transition + a small buffer
            });
        }

        function resetPilgrimage() {
            isDriving = false;
            document.getElementById('start-btn').disabled = false;
            document.querySelectorAll('.temple-marker').forEach(m => m.classList.remove('active', 'visited'));
            document.getElementById('info-overlay').style.opacity = '0';
            updateCarPosition(0);
        }

        window.onload = init;
    </script>
</body>
</html>